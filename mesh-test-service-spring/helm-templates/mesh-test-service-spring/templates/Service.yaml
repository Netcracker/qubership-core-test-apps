---
kind: Service
apiVersion: v1
metadata:
    name: '{{ .Values.DEPLOYMENT_RESOURCE_NAME }}'
    annotations:
        qubership.cloud/start.stage: '0'
    labels:
        app.kubernetes.io/part-of: 'mesh-test-app'
spec:
    ports:
    -   name: web
        port: {{ if .Values.INTERNAL_TLS_ENABLED }} 8443 {{ else }} 8080 {{ end }}
        targetPort: {{ if .Values.INTERNAL_TLS_ENABLED }} 8443 {{ else }} 8080 {{ end }}
    selector:
        name: '{{ .Values.DEPLOYMENT_RESOURCE_NAME }}'
    {{ if  eq .Values.K8S_SERVICE_TYPE "HEADLESS" }}
    clusterIP: None
    {{ end }}

